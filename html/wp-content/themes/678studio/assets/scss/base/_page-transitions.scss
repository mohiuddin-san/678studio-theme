/**
 * Modern Beautiful Page Transitions
 * 現代的で美しいページ遷移アニメーション
 * - グラデーションオーバーレイ
 * - 高品質ブラー効果
 * - 微妙なスケールアニメーション
 * - GPUアクセラレーション最適化
 */

.page-transition-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 9999;
  display: none;
  align-items: center;
  justify-content: center;
  opacity: 0;
  will-change: opacity;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.95) 0%,
    rgba(248, 250, 252, 0.98) 50%,
    rgba(255, 255, 255, 0.95) 100%
  );
  backdrop-filter: blur(20px) saturate(1.2);
  -webkit-backdrop-filter: blur(20px) saturate(1.2);
}

.page-transition-content {
  position: relative;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
}

.page-transition-gradient {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: radial-gradient(
    circle at center,
    rgba(165, 195, 207, 0.1) 0%,
    rgba(165, 195, 207, 0.05) 50%,
    transparent 100%
  );
  opacity: 0;
  animation: gradientPulse 3s ease-in-out infinite;
}

.page-transition-blur-layer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.03);
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
}

@keyframes gradientPulse {
  0%, 100% { opacity: 0; }
  50% { opacity: 1; }
}

// 美しいプリロード状態 - JavaScriptで制御
body:not(.page-ready) .main-content {
  // JavaScriptが読み込まれる前のみ隠す
  filter: blur(12px) brightness(1.05);
  opacity: 0;
  transform: scale(1.05);
  will-change: filter, opacity, transform;
}

// ページが完全に読み込まれて準備完了の状態
body.page-ready {
  .main-content {
    transition: 
      filter 1.0s cubic-bezier(0.0, 0.0, 0.2, 1),
      opacity 0.8s cubic-bezier(0.0, 0.0, 0.2, 1),
      transform 0.8s cubic-bezier(0.0, 0.0, 0.2, 1);
  }
}

// 美しいページ遷移中状態
body.page-transitioning {
  overflow: hidden;
  
  .main-content {
    pointer-events: none;
    will-change: filter, opacity, transform;
    transform-origin: center center;
  }
}

// スムーズなハードウェアアクセラレーション
.main-content {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

// 高品質アニメーションのための最適化
@media (prefers-reduced-motion: no-preference) {
  .page-transition-overlay {
    transition: opacity 1s cubic-bezier(0.4, 0.0, 0.2, 1);
  }
}

@media (prefers-reduced-motion: reduce) {
  .page-transition-overlay,
  .main-content {
    transition: opacity 0.3s ease !important;
  }
  
  .page-transition-gradient {
    animation: none !important;
  }
}

// 全ページで統一された美しいアニメーション
