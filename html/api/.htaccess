# APIディレクトリのアクセス設定
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # HTTPSリダイレクト（本番環境のみ）
    # RewriteCond %{HTTPS} off
    # RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L]
    
    # APIエンドポイントの設定
    RewriteBase /api/
    
    # 存在するファイルやディレクトリへのアクセスは許可
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    
    # APIルーティング
    RewriteRule ^(.*)$ $1.php [L]
</IfModule>

# ディレクトリ一覧の非表示
Options -Indexes

# PHPエラーの表示設定（開発環境用）
<IfModule mod_php7.c>
    php_flag display_errors Off
    php_flag log_errors On
    php_value error_log /var/www/html/api/error.log
</IfModule>

# CORS設定（必要に応じて調整）
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
    Header set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
    Header set Access-Control-Allow-Headers "Content-Type, Authorization"
</IfModule>

# セキュリティヘッダー
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"
</IfModule>